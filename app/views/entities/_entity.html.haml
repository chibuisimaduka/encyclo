- @entity = entity
- if listing_type.show_picture && !entity.images.blank?
  .listing_image= image_tag entity.images.first.image_url(:thumb).to_s
.listing_entity
  = "#{position}."
  = link_to entity.name, entity, :class => "entity_name"
  - if @ranking && ranking_type == RankingType::USER
    = render :partial => "ranking_elements/ranking_element", :locals => {:ranking_id => @ranking.id, :entity_id => entity.id, :position => (position += 1)}
  - else
    -# FIXME: Does not work for documents..
    - if @ranking_elements[entity.id]
      %span.current_user_ranking
        = link_to "N/B", @ranking_elements[entity.id], {:method => :delete} if @ranking_elements[entity.id]
        %span.editable_user_ranking= best_in_place @ranking_elements[entity.id], :rating, html_attrs: {size: 1}, nil: "N/B"
    - elsif current_user
      = link_to "[like]", ranking_elements_path(entity_id: entity.id, rating: entity.rank), method: :post
    %span.users_ranking>= entity.rank ? "#{entity.rank} from #{entity.num_votes} users." : "No user ranking yet."
  = link_to "destroy", entity, :method => :delete, :confirm => "Are you sure?"
  - if listing_type.show_documents
    = render :partial => @entity.documents.first unless @entity.documents.blank?
